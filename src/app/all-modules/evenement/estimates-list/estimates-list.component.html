<!-- Page Wrapper -->
<div class="page-wrapper">
       <div class="content container-fluid">
              <div class="page-header">
                     <div class="row align-items-center">
                            <div class="col">
                                   <h3 class="page-title">Événements</h3>
                                   <ul class="breadcrumb">
                                          <li class="breadcrumb-item"><a [routerLink]="'/'">Dashboard</a></li>
                                          <li class="breadcrumb-item active">Événements</li>
                                   </ul>
                            </div>
                            <div class="col-auto">
                                   <a [routerLink]="'/evenement/add-estimates'" class="btn btn-primary me-2">
                                          <i class="fas fa-plus"></i> Nouvel Événement
                                   </a>
                                   <a class="btn btn-primary filter-btn" href="javascript:void(0);" id="filter_search">
                                          <i class="fas fa-filter"></i>
                                   </a>
                            </div>
                     </div>

                     <div class="row">
                            <div class="col-xl-3 col-sm-6 col-12">
                                   <div class="card">
                                          <div class="card-body">
                                                 <div class="dash-widget-header">
                                                        <span class="dash-widget-icon bg-1">
                                                               <i class="fas fa-church"></i>
                                                        </span>
                                                        <div class="dash-count">
                                                               <div class="dash-title">Administratifs</div>
                                                               <div class="dash-counts">
                                                                      <p>42</p>
                                                               </div>
                                                        </div>
                                                 </div>
                                                 <div class="progress progress-sm mt-3">
                                                        <div class="progress-bar bg-5" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                                 </div>
                                                 <p class="text-muted mt-3 mb-0"><span class="text-success me-1"><i class="fas fa-arrow-up me-1"></i>2.15%</span> depuis la semaine dernière</p>
                                          </div>
                                   </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 col-12">
                                   <div class="card">
                                          <div class="card-body">
                                                 <div class="dash-widget-header">
                                                        <span class="dash-widget-icon bg-2">
                                                               <i class="fas fa-praying-hands"></i>
                                                        </span>
                                                        <div class="dash-count">
                                                               <div class="dash-title">Communautaires</div>
                                                               <div class="dash-counts">
                                                                      <p>36</p>
                                                               </div>
                                                        </div>
                                                 </div>
                                                 <div class="progress progress-sm mt-3">
                                                        <div class="progress-bar bg-6" role="progressbar" style="width: 65%" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                                 </div>
                                                 <p class="text-muted mt-3 mb-0"><span class="text-success me-1"><i class="fas fa-arrow-up me-1"></i>3.37%</span> depuis la semaine dernière</p>
                                          </div>
                                   </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 col-12">
                                   <div class="card">
                                          <div class="card-body">
                                                 <div class="dash-widget-header">
                                                        <span class="dash-widget-icon bg-3">
                                                               <i class="fas fa-bible"></i>
                                                        </span>
                                                        <div class="dash-count">
                                                               <div class="dash-title">Litturgique</div>
                                                               <div class="dash-counts">
                                                                      <p>24</p>
                                                               </div>
                                                        </div>
                                                 </div>
                                                 <div class="progress progress-sm mt-3">
                                                        <div class="progress-bar bg-7" role="progressbar" style="width: 85%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                                                 </div>
                                                 <p class="text-muted mt-3 mb-0"><span class="text-success me-1"><i class="fas fa-arrow-up me-1"></i>1.77%</span> depuis la semaine dernière</p>
                                          </div>
                                   </div>
                            </div>
                            <div class="col-xl-3 col-sm-6 col-12">
                                   <div class="card">
                                          <div class="card-body">
                                                 <div class="dash-widget-header">
                                                        <span class="dash-widget-icon bg-4">
                                                               <i class="fas fa-hands-helping"></i>
                                                        </span>
                                                        <div class="dash-count">
                                                               <div class="dash-title">Culturels</div>
                                                               <div class="dash-counts">
                                                                      <p>18</p>
                                                               </div>
                                                        </div>
                                                 </div>
                                                 <div class="progress progress-sm mt-3">
                                                        <div class="progress-bar bg-8" role="progressbar" style="width: 45%" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"></div>
                                                 </div>
                                                 <p class="text-muted mt-3 mb-0"><span class="text-success me-1"><i class="fas fa-arrow-up me-1"></i>4.68%</span> depuis la semaine dernière</p>
                                          </div>
                                   </div>
                            </div>
                     </div>
              </div>

              <!-- Search Filter -->
              <div id="filter_inputs" class="card filter-card">
                     <div class="card-body pb-0">
                            <div class="row">
                                   <div class="col-md-3">
                                          <div class="form-group">
                                                 <label>Type d'Événement:</label>
                                                 <select class="form-select">
                                                        <option>Tous les types</option>
                                                        <option>Culte</option>
                                                        <option>Prière</option>
                                                        <option>Étude Biblique</option>
                                                        <option>Action Sociale</option>
                                                        <option>Jeunesse</option>
                                                        <option>Mariage</option>
                                                        <option>Baptême</option>
                                                 </select>
                                          </div>
                                   </div>
                                   <div class="col-md-3">
                                          <div class="form-group">
                                                 <label>Statut:</label>
                                                 <select class="form-select">
                                                        <option>Tous les statuts</option>
                                                        <option>À venir</option>
                                                        <option>En cours</option>
                                                        <option>Terminé</option>
                                                        <option>Annulé</option>
                                                 </select>
                                          </div>
                                   </div>
                                   <div class="col-md-3">
                                          <div class="form-group">
                                                 <label>Date Début</label>
                                                 <div class="cal-icon">
                                                        <input type="date" class="form-control" name="dp" />
                                                 </div>
                                          </div>
                                   </div>
                                   <div class="col-md-3">
                                          <div class="form-group">
                                                 <label>Date Fin</label>
                                                 <div class="cal-icon">
                                                        <input type="date" class="form-control" name="dp" />
                                                 </div>
                                          </div>
                                   </div>
                            </div>
                     </div>
              </div>
              <!-- /Search Filter -->

              <div class="row">
                     <div class="col-sm-12">
                            <div class="card card-table">
                                   <div class="card-body">
                                          <div class="table-responsive">
                                                 <table datatable class="table table-stripped table-hover">
                                                        <thead class="thead-light">
                                                               <tr>
                                                                      <th>Titre</th>
                                                                      <th>Date</th>
                                                                      <th>Horaire</th>
                                                                      <th>Fréquentation</th>
                                                                      <th>Visibilité</th>
                                                                      <th>Localisation</th>
                                                                      <th>Status</th>
                                                                      <th class="text-end">Actions</th>
                                                               </tr>
                                                        </thead>
                                                        <tbody>
                                                               <tr *ngFor="let event of events">
                                                                      <td>
                                                                             <a [routerLink]="['/evenement/view-estimates', event.id]">{{ event.titre }}</a>
                                                                      </td>
                                                                      <td>{{ event.date | date: "dd MMM yyyy" }}</td>
                                                                      <td>
                                                                             <span *ngIf="event.dureeType === 'journee'">Toute la journée</span>
                                                                             <span *ngIf="event.dureeType === 'jours'">Plusieurs jours</span>
                                                                             <span *ngIf="!event.dureeType">{{ event.heureDebut }} - {{ event.heureFin }}</span>
                                                                      </td>
                                                                      <td>{{ event.frequentation }}</td>
                                                                      <td>
                                                                             <span [class]="'badge ' + (event.visibilite === 'Public' ? 'bg-success-light' : 'bg-warning-light')">
                                                                                    {{ event.visibilite }}
                                                                             </span>
                                                                      </td>
                                                                      <td>{{ event.localisation }}</td>
                                                                      <td>
                                                                             <span [class]="'badge ' + 
                                                                                    (event.status === 'À venir' ? 'bg-success-light' : 
                                                                                     event.status === 'En cours' ? 'bg-info-light' : 
                                                                                     event.status === 'Terminé' ? 'bg-warning-light' : 
                                                                                     'bg-danger-light')">
                                                                                    {{ event.status }}
                                                                             </span>
                                                                      </td>
                                                                      <td class="text-end">
                                                                             <div class="dropdown dropdown-action">
                                                                                    <a href="javascript:void(0)" class="action-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                                                                                           <i class="fas fa-ellipsis-h"></i>
                                                                                    </a>
                                                                                    <div class="dropdown-menu dropdown-menu-right">
                                                                                           <a class="dropdown-item" [routerLink]="['/evenement/view-estimates', event.id]">
                                                                                                  <i class="far fa-eye me-2"></i>Voir
                                                                                           </a>
                                                                                           <a class="dropdown-item" [routerLink]="['/evenement/edit-estimates', event.id]">
                                                                                                  <i class="far fa-edit me-2"></i>Modifier
                                                                                           </a>
                                                                                           <a class="dropdown-item" data-bs-toggle="modal" data-bs-target="#delete_estimate" (click)="openDeleteModal(event.id)">
                                                                                                  <i class="far fa-trash-alt me-2"></i>Supprimer
                                                                                           </a>
                                                                                    </div>
                                                                             </div>
                                                                      </td>
                                                               </tr>
                                                        </tbody>
                                                 </table>
                                          </div>
                                   </div>
                            </div>
                     </div>
              </div>
       </div>
</div>

<!-- Delete Event Modal -->
<div class="modal custom-modal fade" id="delete_estimate" role="dialog">
       <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                     <div class="modal-body">
                            <div class="modal-icon text-center mb-3">
                                   <i class="fas fa-trash-alt text-danger"></i>
                            </div>
                            <div class="modal-text text-center">
                                   <h2>Supprimer l'événement</h2>
                                   <p>Êtes-vous sûr de vouloir supprimer cet événement ?</p>
                            </div>
                     </div>
                     <div class="modal-footer text-center">
                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                            <button type="button" class="btn btn-primary" (click)="deleteEvent()" data-bs-dismiss="modal">Supprimer</button>
                     </div>
              </div>
       </div>
</div>
<!-- /Delete Event Modal -->

